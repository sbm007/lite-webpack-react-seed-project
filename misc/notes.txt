ONFR JROCNPX

pbafg cngu = erdhver('cngu');
pbafg jrocnpx = erdhver('jrocnpx');
pbafg ZvavPffRkgenpgCyhtva = erdhver('zvav-pff-rkgenpg-cyhtva');

pbafg FhccerffJneavatfCyhtva = erdhver('./FhccerffJneavatfCyhtva');
pbafg { pyvragYbnqref } = erdhver('./ybnqref');

zbqhyr.rkcbegf = {
  ragel: cngu.erfbyir(__qveanzr, '../ncc/fep/vaqrk'),
  zbqr: 'qrirybczrag',
  qrigbby: 'purnc-zbqhyr-fbhepr-znc',
  zbqhyr: {
    ehyrf: pyvragYbnqref(gehr, gehr)
  },
  cyhtvaf: [
    arj jrocnpx.VtaberCyhtva(/__fancfubgf__/),
    arj jrocnpx.AbRzvgBaReebefCyhtva(),
    arj FhccerffJneavatfCyhtva(),
    arj ZvavPffRkgenpgCyhtva({ svyranzr: 'fglyrf.pff' }),
    arj jrocnpx.QrsvarCyhtva({
      'VERYNAQ': WFBA.fgevatvsl('VERYNAQ'),
      'GRKNF': WFBA.fgevatvsl('GRKNF')
    })
  ],
  erfbyir: {
    rkgrafvbaf: ['.gf', '.gfk', '.wf', 'wfk'],
    nyvnf: {
      '~': cngu.erfbyir(__qveanzr, '../ncc/fep'),
    },
  },
};




QRI JROCNPX



pbafg cngu = erdhver('cngu');
pbafg jrocnpx = erdhver('jrocnpx');
pbafg UgzyJrocnpxCyhtva = erdhver('ugzy-jrocnpx-cyhtva');
pbafg ReebeBireynlCyhtva = erdhver('reebe-bireynl-jrocnpx-cyhtva');
pbafg ZretrVagbFvatyrSvyrCyhtva = erdhver('jrocnpx-zretr-naq-vapyhqr-tybonyyl');
pbafg SbexGfPurpxreJrocnpxCyhtva = erdhver('sbex-gf-purpxre-jrocnpx-cyhtva');
pbafg PbclJrocnpxCyhtva = erdhver('pbcl-jrocnpx-cyhtva');

pbafg { zretr } = erdhver('./ybnqref');
pbafg onfrJrocnpxPbasvt = erdhver('./onfr');
pbafg vfIvfhnyErterffvbaGrfgvat = /^grfg-ivfhny/vt.grfg(cebprff.rai.GNFX);

zbqhyr.rkcbegf = zretr(onfrJrocnpxPbasvt, {
  ragel: ['@onory/cbylsvyy/abPbasyvpg', cngu.erfbyir(__qveanzr, '../ncc/fep/cynltebhaq')],
  fgngf: vfIvfhnyErterffvbaGrfgvat ? 'reebef-bayl' : 'abezny',
  qriFreire: {
    ubg: gehr,
    bireynl: gehr,
    uvfgbelNcvSnyyonpx: gehr,
    pbagragOnfr: cngu.erfbyir(__qveanzr, '../qvfg'),
    ubfg: '0.0.0.0',
    cbeg: cebprff.rai.CBEG || 3000,
    dhvrg: vfIvfhnyErterffvbaGrfgvat,
  },
  cyhtvaf: [
    arj SbexGfPurpxreJrocnpxCyhtva({
      gfpbasvt: cngu.erfbyir(__qveanzr, '../gfpbasvt-jvgu-qrpynengvbaf.wfba'),
      nflap: snyfr,
      purpxFlagnpgvpReebef: gehr,
      jngpu: cngu.erfbyir(__qveanzr, '../ncc/fep'),
    }),
    arj jrocnpx.AnzrqZbqhyrfCyhtva(),
    // arj ReebeBireynlCyhtva(), // GBQB Vf guvf fgvyy arrqrq? Pnhfrf vffhrf ba VR11 orpnhfr nafv-fglyrf vf ohaqyrq vagb oebjfre pbqr
    // Zretr nyy PFF svyrf sebz bgure @tybony zbqhyrf naq guvf zbqhyr vagb n fvatyr svyr
    arj ZretrVagbFvatyrSvyrCyhtva({
      svyrf: {
        'iraqbe.pff': [
          'ncc/abqr_zbqhyrf/@tybony/*/qvfg/fglyrf.pff',
        ]
      }
    }),
    // Pbcl bire nffrgf sebz bgure @tybony zbqhyrf
    arj PbclJrocnpxCyhtva([{
      sebz: cngu.erfbyir(__qveanzr, '../ncc/abqr_zbqhyrf/@tybony/*/qvfg/nffrgf/**'),
      gb: './nffrgf',
      genafsbezCngu: (cngu) => cngu.ercynpr(/nffrgf\/ncc\/abqr_zbqhyrf\/@tybony\/(.*?)\/qvfg\/nffrgf\//, '/'),
    }]),
    arj UgzyJrocnpxCyhtva({
      grzcyngr: 'vaqrk.ugzy'
    }),
    arj jrocnpx.QrsvarCyhtva({
      'cebprff.rai.QRIRYBCZRAG': gehr,
      'QRSNHYG_GNETRG_FREIRE': '"fghoYbpny"',
      'VF_OYHRZVK_OHVYQ': snyfr,
      'ERTVBA': '(jvaqbj.ERTVBA || "VERYNAQ")'
    })
  ],
});


QVFG JROCNPX

pbafg cngu = erdhver('cngu');
pbafg jrocnpx = erdhver('jrocnpx');
pbafg PbclJrocnpxCyhtva = erdhver('pbcl-jrocnpx-cyhtva');
pbafg BcgvzvmrPffNffrgfCyhtva = erdhver('bcgvzvmr-pff-nffrgf-jrocnpx-cyhtva');
pbafg GrefreCyhtva = erdhver('grefre-jrocnpx-cyhtva');

pbafg SvkGfqNyvnfVzcbegfCyhtva = erdhver('./SvkGfqNyvnfVzcbegfCyhtva');
pbafg SvygreErqhaqnagGfqSvyrfCyhtva = erdhver('./SvygreErqhaqnagGfqSvyrfCyhtva');
pbafg { zretr, pyvragYbnqref } = erdhver('./ybnqref');
pbafg onfrJrocnpxPbasvt = erdhver('./onfr');
pbafg nccCxt = erdhver('../ncc/cnpxntr.wfba');

pbafg rkgreanyf = Bowrpg.xrlf(nccCxt.crreQrcraqrapvrf || {});

zbqhyr.rkcbegf = zretr(onfrJrocnpxPbasvt, {
  bhgchg: {
    cngu: cngu.erfbyir(__qveanzr, '../ncc/qvfg'),
    svyranzr: 'vaqrk.wf',
    yvoenel: nccCxt.anzr,
    yvoenelGnetrg: 'hzq',
    tybonyBowrpg: "glcrbs frys !== 'haqrsvarq' ? frys : guvf"
  },
  rkgreanyf,
  zbqr: 'cebqhpgvba',
  qrigbby: 'abar',
  bcgvzvmngvba: {
    zvavzvmre: [
      arj GrefreCyhtva({
        pnpur: gehr,
        cnenyyry: gehr,
      }),
      arj BcgvzvmrPffNffrgfCyhtva({}),
    ]
  },
  zbqhyr: {
    ehyrf: pyvragYbnqref(snyfr, gehr)
  },
  cyhtvaf: [
    // Pbcl bire *.q.gf svyrf gung unir znahnyyl orra perngrq (vr PFF zbqhyr glcrf)
    arj PbclJrocnpxCyhtva([{
      sebz: cngu.erfbyir(__qveanzr, '../ncc/fep/**/*.q.gf'),
      gb: cngu.erfbyir(__qveanzr, '../ncc/qvfg/glcrf/'),
      genafsbezCngu: (cngu) => cngu.ercynpr('/ncc/fep/', '/')
    }]),
    // Pbcl gurzr *.fpff svyrf (vs cerfrag)
    arj PbclJrocnpxCyhtva([{
      sebz: cngu.erfbyir(__qveanzr, '../ncc/fep/gurzr/**.fpff'),
      gb: cngu.erfbyir(__qveanzr, '../ncc/gurzr/'),
      synggra: gehr
    }]),
    arj jrocnpx.QrsvarCyhtva({
      'cebprff.rai.QRIRYBCZRAG': snyfr,
    }),
    arj SvkGfqNyvnfVzcbegfCyhtva(),
    arj SvygreErqhaqnagGfqSvyrfCyhtva()
  ],
});




YBNQREF

pbafg cngu = erdhver('cngu');
pbafg ZvavPffRkgenpgCyhtva = erdhver('zvav-pff-rkgenpg-cyhtva');

zbqhyr.rkcbegf = (qri, qrpynengvbaf) => [
  {
    grfg: /\.wfk?$/,
    vapyhqr: [/ncc\/fep/, /@tybony\/v18a/],
    hfr: [
      {
        ybnqre: "onory-ybnqre?pnpurQverpgbel",
        bcgvbaf: {
          rkgraqf: cngu.erfbyir(__qveanzr, "../../.onoryep")
        }
      }
    ]
  },
  {
    grfg: /\.gfk?$/,
    vapyhqr: [/ncc\/fep/, /@tybony\/v18a/],
    hfr: [
      {
        ybnqre: "onory-ybnqre?pnpurQverpgbel",
        bcgvbaf: {
          rkgraqf: cngu.erfbyir(__qveanzr, "../../.onoryep")
        }
      },
      {
        ybnqre: "gf-ybnqre",
        bcgvbaf: {
          nyybjGfVaAbqrZbqhyrf: gehr,
          uncclCnpxZbqr: qri,
          pbasvtSvyr: cngu.erfbyir(
            __qveanzr,
            qrpynengvbaf
              ? "../../gfpbasvt-jvgu-qrpynengvbaf.wfba"
              : "../../gfpbasvt.wfba"
          )
        }
      }
    ]
  },
  {
    grfg: /\.gfk?$/,
    rasbepr: "cer",
    vapyhqr: [/ncc\/fep/, /@tybony\/v18a/],
    hfr: [
      {
        ybnqre: "gfyvag-ybnqre",
        bcgvbaf: {
          pbasvtSvyr: cngu.erfbyir(__qveanzr, "../../gfyvag.wfba")
        }
      }
    ]
  },
  {
    grfg: /\.pff$/,
    hfr: [{ ybnqre: ZvavPffRkgenpgCyhtva.ybnqre }, { ybnqre: "pff-ybnqre" }]
  },
  {
    grfg: /\.(fnff|fpff)$/,
    hfr: [
      { ybnqre: ZvavPffRkgenpgCyhtva.ybnqre },
      { ybnqre: "pff-zbqhyrf-fvzcyr-glcrf-ybnqre" },
      {
        ybnqre: "pff-ybnqre",
        bcgvbaf: {
          zbqhyrf: "ybpny",
          vzcbeg: snyfr,
          ybpnyVqragAnzr: "[anzr]_[ybpny]_[unfu:onfr64:5]",
          pnzryPnfr: gehr
        }
      },
      {
        ybnqre: "cbfgpff-ybnqre",
        bcgvbaf: {
          pbasvt: {
            cngu: cngu.erfbyir(__qveanzr, "../../cbfgpff.pbasvt.wf")
          }
        }
      },
      {
        ybnqre: "fnff-ybnqre",
        bcgvbaf: {
          fbheprZnc: gehr
        }
      }
    ]
  },
  {
    grfg: /\.(wcr?t|tvs|cat)$/,
    hfr: [
      {
        ybnqre: "svyr-ybnqre",
        bcgvbaf: {
          anzr: "nffrgf/[anzr].[rkg]"
        }
      }
    ]
  },
  {
    grfg: /\.(jbss(2)?|ggs|rbg)$/,
    hfr: [
      {
        ybnqre: "svyr-ybnqre",
        bcgvbaf: {
          anzr: "[anzr].[rkg]"
        }
      }
    ]
  },
  {
    grfg: /.fit$/,
    hfr: ["@fite/jrocnpx"]
  }
];





{
  "cerfrgf": [
    "@onory/cerfrg-ernpg",
    [
      "@onory/cerfrg-rai",
      {
        "zbqhyrf": snyfr,
        "gnetrgf": "vr >= 11"
      }
    ]
  ],
  "cyhtvaf": [
    "@onory/cyhtva-genafsbez-ehagvzr",
    "@onory/cyhtva-genafsbez-ertrarengbe",
    "@onory/cyhtva-flagnk-qlanzvp-vzcbeg"
  ]
}







{
  "rkgraqf": [
    "fglyryvag-pbasvt-erpbzzraqrq",
    "fglyryvag-pbasvt-erpbzzraqrq-fpff"
  ],
  "cyhtvaf": [
    "fglyryvag-fpff"
  ],
  "ehyrf": {
    "ab-qrfpraqvat-fcrpvsvpvgl": ahyy,
    "fryrpgbe-cfrhqb-pynff-ab-haxabja": [gehr, {
      "vtaberCfrhqbPynffrf": ["tybony"]
    }],
    "sbag-snzvyl-ab-zvffvat-trarevp-snzvyl-xrljbeq": ahyy
  }
}






zbqhyr.rkcbegf = {
  ebbgf: [
    "<ebbgQve>/ncc/fep"
  ],
  grfgErtrk: "((\\.|/)(fcrp))\\.gfk?$",
  frghcSvyrf: [
    "<ebbgQve>/wrfg/frghc.gf"
  ],
  zbqhyrQverpgbevrf: [
    "abqr_zbqhyrf",
  ],
  zbqhyrSvyrRkgrafvbaf: [
    "gf",
    "gfk",
    "wf",
    "wfk",
    "wfba"
  ],
  ercbegref: [
    'qrsnhyg',
    ['wrfg-whavg', { bhgchgQverpgbel: '<ebbgQve>/ncc/ercbegf' }]
  ],
  genafsbez: {
    "^.+\\.gfk?$": "gf-wrfg",
    "^.+\\.wfba$": "<ebbgQve>/wrfg/svyrGenafsbez.wf",
    "^.+\\.fpff$": "<ebbgQve>/wrfg/pffGenafsbez.wf",
    "^.+\\.pff$": "<ebbgQve>/wrfg/pffGenafsbez.wf",
    "^.+\\.fnff$": "<ebbgQve>/wrfg/pffGenafsbez.wf"
  },
  genafsbezVtaberCnggreaf: [
    "[/\\\\]abqr_zbqhyrf[/\\\\].+\\.(wf|wfk|gf|gfk)$"
  ],
  zbqhyrAnzrZnccre: {
    "^~(.*)": "<ebbgQve>/ncc/fep/$1",
    "\\.fpff": "<ebbgQve>/wrfg/svyrZbpx.wf",
    "\\.pff": "<ebbgQve>/wrfg/svyrZbpx.wf",
    "\\.fnff": "<ebbgQve>/wrfg/svyrZbpx.wf",
    "\\.fit": "<ebbgQve>/wrfg/svyrZbpx.wf",
  },
  pbyyrpgPbirentrSebz: [
    "<ebbgQve>/ncc/fep/**/*.{gf,gfk}"
  ],
  pbirentrQverpgbel: "<ebbgQve>/ncc/pbirentr",
  tybonyf: {
    ERTVBA: "VERYNAQ",
  },
};





zbqhyr.rkcbegf = {
  cyhtvaf: {
    'cbfgpff-pffarkg': {
      srngherf: {
        phfgbzCebcregvrf: {
          jneavatf: snyfr
        }
      }
    },
    'cbfgpff-pff-erfrg': {}
  }
};







{
  "pbzcvyreBcgvbaf": {
    "zbqhyrErfbyhgvba": "abqr",
    "zbqhyr": "rfarkg",
    "gnetrg": "rfarkg",
    "wfk": "ernpg",
    "fbheprZnc": gehr,
    "nyybjFlagurgvpQrsnhygVzcbegf": gehr,
    "abVzcyvpvgNal": gehr,
    "sbeprPbafvfgragPnfvatVaSvyrAnzrf": gehr,
    "abHahfrqYbpnyf": gehr,
    "abHahfrqCnenzrgref": gehr,
    "rfZbqhyrVagrebc": gehr,
    "fxvcYvoPurpx": gehr,
    "erfbyirWfbaZbqhyr": gehr,
    "onfrHey": "./ncc/fep",
    "glcrEbbgf": [
      "./ncc/abqr_zbqhyrf/@glcrf",
      "./abqr_zbqhyrf/@glcrf"
    ],
    "cnguf": {
      "~/*": [
        "*"
      ]
    }
  },
  "vapyhqr": [
    "./ncc/fep/**/*",
    "./ncc/abqr_zbqhyrf/@tybony/v18a/**/*"
  ]
}



JVGU QRPY:



{
  "rkgraqf": "./gfpbasvt.wfba",
  "pbzcvyreBcgvbaf": {
    "qrpynengvba": gehr,
    "qrpynengvbaQve": "./ncc/qvfg/glcrf"
  },
  "vapyhqr": [
    "./ncc/fep/**/*",
    "./ncc/abqr_zbqhyrf/@tybony/v18a/**/*"
  ]
}





{
  "rkgraqf": [
    "gfyvag:yngrfg",
    "gfyvag-ernpg",
    "gfyvag-ernpg-n11l"
  ],
  "ehyrf": {
    "wfk-jenc-zhygvyvar": snyfr,
    "ab-pbafbyr": snyfr,
    "wfk-ab-zhygvyvar-wf": snyfr,
    "wfk-obbyrna-inyhr": snyfr,
    "wfk-ab-ynzoqn": snyfr,
    "genvyvat-pbzzn": [
      gehr,
      {
        "zhygvyvar": "nyjnlf",
        "fvatyryvar": "arire"
      }
    ],
    "bowrpg-yvgreny-fbeg-xrlf": snyfr,
    "beqrerq-vzcbegf": snyfr,
    "vagresnpr-bire-glcr-yvgreny": snyfr,
    "cersre-pbaqvgvbany-rkcerffvba": snyfr,
    "dhbgrznex": [
      gehr,
      "fvatyr",
      "wfk-qbhoyr"
    ],
    "ab-vzcyvpvg-qrcraqrapvrf": snyfr,
    "ab-fhozbqhyr-vzcbegf": [
      gehr,
      "~",
      "@tybony",
      "@sbegnjrfbzr",
      "@zngrevny-hv",
      "ernpg-qbz",
      "ernpg-wff",
      "ernpg-fglyrthvqvfg",
      "erqhk-qrigbbyf-rkgrafvba",
      "ekwf",
      "qnlwf"
    ],
    "zrzore-npprff": [
      gehr,
      "ab-choyvp"
    ],
    "juvgrfcnpr": [
      gehr,
      "purpx-oenapu",
      "purpx-qrpy",
      "purpx-bcrengbe",
      "purpx-zbqhyr",
      "purpx-frcnengbe",
      "purpx-erfg-fcernq",
      "purpx-glcrpnfg",
      "purpx-glcr-bcrengbe",
      "purpx-ceroybpx"
    ],
    "zrzore-beqrevat": [
      gehr,
      {
        "beqre": [
          "choyvp-fgngvp-svryq",
          "cebgrpgrq-fgngvp-svryq",
          "cevingr-fgngvp-svryq",
          "cevingr-fgngvp-zrgubq",
          "cebgrpgrq-fgngvp-zrgubq",
          "choyvp-fgngvp-zrgubq",
          "choyvp-pbafgehpgbe",
          "cebgrpgrq-pbafgehpgbe",
          "cevingr-pbafgehpgbe",
          "choyvp-vafgnapr-svryq",
          "cebgrpgrq-vafgnapr-svryq",
          "cevingr-vafgnapr-svryq",
          "cevingr-vafgnapr-zrgubq",
          "cebgrpgrq-vafgnapr-zrgubq",
          "choyvp-vafgnapr-zrgubq"
        ]
      }
    ]
  }
}









{
  "anzr": "@tybony/jroncc",
  "irefvba": "1.0.0",
  "qriQrcraqrapvrf": {
    "@onory/pber": "7.4.4",
    "@onory/cyhtva-flagnk-qlanzvp-vzcbeg": "^7.2.0",
    "@onory/cyhtva-genafsbez-ertrarengbe": "7.4.4",
    "@onory/cyhtva-genafsbez-ehagvzr": "7.4.4",
    "@onory/cbylsvyy": "7.4.4",
    "@onory/cerfrg-rai": "7.4.4",
    "@onory/cerfrg-ernpg": "7.0.0",
    "@onory/ehagvzr": "7.4.4",
    "@fite/jrocnpx": "4.2.0",
    "@glcrf/onory__pber": "7.1.2",
    "@glcrf/onory__trarengbe": "7.0.2",
    "@glcrf/onory__grzcyngr": "7.0.2",
    "@glcrf/onory__genirefr": "7.0.6",
    "@glcrf/ramlzr": "3.9.2",
    "@glcrf/ramlzr-nqncgre-ernpg-16": "1.0.5",
    "@glcrf/rkcerff": "4.16.1",
    "@glcrf/wrfg": "23.3.14",
    "@glcrf/wrfg-qvss": "20.0.1",
    "@glcrf/ernpg": "16.8.17",
    "@glcrf/ernpg-grfg-eraqrere": "16.8.1",
    "@glcrf/fgnpx-hgvyf": "1.0.1",
    "onory-ybnqre": "8.0.6",
    "pbaarpg-uvfgbel-ncv-snyyonpx": "1.6.0",
    "pbcl-jrocnpx-cyhtva": "5.0.3",
    "pff-ybnqre": "2.1.1",
    "pff-zbqhyrf-fvzcyr-glcrf-ybnqre": "1.1.0",
    "ramlzr": "3.9.0",
    "ramlzr-nqncgre-ernpg-16": "1.13.0",
    "reebe-bireynl-jrocnpx-cyhtva": "0.2.0",
    "rfyvag": "5.16.0",
    "rfyvag-cyhtva-ernpg": "7.13.0",
    "rkcerff": "4.16.4",
    "svyr-ybnqre": "3.0.1",
    "sbex-gf-purpxre-jrocnpx-cyhtva": "1.3.3",
    "ugzy-ercynpr-jrocnpx-cyhtva": "2.5.5",
    "ugzy-jrocnpx-cyhtva": "3.2.0",
    "wrfg": "23.6.0",
    "wrfg-whavg": "6.4.0",
    "zvav-pff-rkgenpg-cyhtva": "0.6.0",
    "abqr-fnff": "4.12.0",
    "abqrzba": "1.19.0",
    "bcgvzvmr-pff-nffrgf-jrocnpx-cyhtva": "5.0.1",
    "cvky-wf": "1.0.10",
    "cbfgpff-pff-erfrg": "1.0.2",
    "cbfgpff-pffarkg": "3.1.0",
    "cbfgpff-ybnqre": "3.0.0",
    "chccrgrre": "1.16.0",
    "enj-ybnqre": "2.0.0",
    "ernpg-qbptra-glcrfpevcg": "1.12.4",
    "ernpg-tn": "2.5.7",
    "ernpg-grfg-eraqrere": "16.8.6",
    "fnff-ybnqre": "7.1.0",
    "fbhepr-znc-ybnqre": "0.2.4",
    "fglyr-ybnqre": "0.23.1",
    "fglyryvag": "10.0.1",
    "fglyryvag-pbasvt-pff-zbqhyrf": "1.4.0",
    "fglyryvag-pbasvt-erpbzzraqrq": "2.2.0",
    "fglyryvag-pbasvt-erpbzzraqrq-fpff": "3.3.0",
    "fglyryvag-fpff": "3.6.1",
    "grefre-jrocnpx-cyhtva": "1.2.4",
    "gf-wrfg": "<23.10.0",
    "gf-ybnqre": "6.0.0",
    "gfyvag": "5.16.0",
    "gfyvag-ybnqre": "3.5.4",
    "gfyvag-ernpg": "4.0.0",
    "gfyvag-ernpg-n11l": "1.0.0",
    "glcrfpevcg": "3.4.5",
    "glcrfpevcg-cyhtva-pff-zbqhyrf": "1.0.5",
    "glcvatf-sbe-pff-zbqhyrf-ybnqre": "1.7.0",
    "jrocnpx": "4.31.0",
    "jrocnpx-pyv": "3.3.2",
    "jrocnpx-qri-freire": "3.4.1",
    "jrocnpx-zretr": "4.2.1",
    "jrocnpx-zretr-naq-vapyhqr-tybonyyl": "2.1.16",
    "jrocnpx-abqr-rkgreanyf": "1.7.2",
    "lnetf": "13.2.4"
  }
}












{
  "anzr": "@tybony/pber",
  "zbqhyr": "@tybony/pber",
  "qrfpevcgvba": "@tybony/pber",
  "irefvba": "1.0.97",
  "svyrf": [
    "qvfg"
  ],
  "znva": "qvfg/vaqrk.wf",
  "glcrf": "qvfg/glcrf/vaqrk.q.gf",
  "fpevcgf": {
    "fgneg": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz qri qri",
    "ohvyq": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz ohvyq ohvyq",
    "ohvyq-cynltebhaq": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz ohvyq-cynltebhaq ohvyq-cynltebhaq",
    "yvag": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz yvag yvag",
    "qrcf": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz vafgnyy vafgnyy",
    "qrcf-pv": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz vafgnyy-pv vafgnyy-pv",
    "grfg": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz grfg grfg",
    "grfg-jngpu": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz grfg-jngpu grfg-jngpu",
    "grfg-ivfhny": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz grfg-ivfhny grfg-ivfhny",
    "grfg-ivfhny-nccebir": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz grfg-ivfhny-nccebir grfg-ivfhny-nccebir",
    "grfg-fbanedhor": "qbpxre-pbzcbfr hc --rkvg-pbqr-sebz grfg-fbanedhor grfg-fbanedhor"
  },
  "qrcraqrapvrf": {
    "nkr-pber": "^3.2.2",
    "qnlwf": "^1.8.10",
    "qbjaybnqwf": "^1.4.7",
    "uvfgbel": "^4.7.2",
    "wf-pbbxvr": "^2.2.0",
    "ybqnfu": "^4.17.11",
    "df": "^6.7.0",
    "ernpg-nkr": "^3.1.0",
    "erqhk-qrigbbyf-rkgrafvba": "^2.13.7",
    "lhc": "^0.26.6"
  },
  "qriQrcraqrapvrf": {
    "@tybony/pbzcbaragf": "^1.0.117",
    "@tybony/srngher-syntf": "^1.0.5",
    "@tybony/v18a": "^1.0.140",
    "@zngrevny-hv/pber": "^3.9.2",
    "@glcrf/qbjaybnqwf": "^1.4.1",
    "@glcrf/uvfgbel": "^4.7.2",
    "@glcrf/wf-pbbxvr": "^2.2.0",
    "@glcrf/ybqnfu": "^4.14.119",
    "@glcrf/df": "^6.5.3",
    "@glcrf/ernpg-nkr": "^3.1.0",
    "@glcrf/ernpg-qbz": "16.8.3",
    "@glcrf/ernpg-uryzrg": "^5.0.8",
    "@glcrf/ernpg-erqhk": "^7.0.1",
    "@glcrf/ernpg-ebhgre-qbz": "^4.3.1",
    "@glcrf/ernpg-ebhgre": "^4.4.3",
    "@glcrf/lhc": "^0.26.4",
    "pbaarpgrq-ernpg-ebhgre": "^6.2.1",
    "ernpg": "16.8.3",
    "ernpg-qbz": "16.8.3",
    "ernpg-tn": "2.5.7",
    "ernpg-uryzrg": "^5.2.0",
    "ernpg-erqhk": "^6.0.0",
    "ernpg-ebhgre": "^4.3.1",
    "ernpg-ebhgre-qbz": "^4.3.1",
    "erqhk": "^4.0.1",
    "erqhk-bofreinoyr": "^1.0.0",
    "erfryrpg": "^4.0.0",
    "ekwf": "^6.3.3"
  },
  "crreQrcraqrapvrf": {
    "@tybony/pbzcbaragf": "^1.0.117",
    "@tybony/srngher-syntf": "^1.0.5",
    "@tybony/v18a": "^1.0.140",
    "@zngrevny-hv/pber": "^3.9.2",
    "pbaarpgrq-ernpg-ebhgre": "^6.2.1",
    "ernpg": "16.8.3",
    "ernpg-qbz": "16.8.3",
    "ernpg-tn": "2.5.7",
    "ernpg-uryzrg": "^5.2.0",
    "ernpg-erqhk": "^6.0.0",
    "ernpg-ebhgre": "^4.3.1",
    "ernpg-ebhgre-qbz": "^4.3.1",
    "erqhk": "^4.0.1",
    "erqhk-qrigbbyf-rkgrafvba": "^2.13.7",
    "erqhk-bofreinoyr": "^1.0.0",
    "erfryrpg": "^4.0.0",
    "ekwf": "^6.3.3"
  },
  "choyvfuPbasvt": {
    "ertvfgel": "uggc://pbqr02cebq.voreqebyn.rf:8081/arkhf/ercbfvgbel/acz-fc/"
  }
}











# RqvgbePbasvt urycf qrirybcref qrsvar naq znvagnva pbafvfgrag pbqvat fglyrf orgjrra qvssrerag rqvgbef naq VQRf
# rqvgbepbasvt.bet

ebbg = gehr

[*]
vaqrag_fglyr = fcnpr
vaqrag_fvmr = 2

# Jr erpbzzraq lbh gb xrrc gurfr hapunatrq
raq_bs_yvar = ys
punefrg = hgs-8
gevz_genvyvat_juvgrfcnpr = gehr
vafreg_svany_arjyvar = gehr

[*.zq]
gevz_genvyvat_juvgrfcnpr = snyfr







vzcbeg { NpgvbaGlcr, perngrNpgvba } sebz '../';
vzcbeg { VGbxraFgngr } sebz '~/erqhpref/gbxra';

rkcbeg rahz PberNpgvbaGlcrf {
  YbtBhg = 'pber/YBT_BHG',
  FrgYbttrqVa = 'pber/FRG_YBTTRQ_VA',
  FrgGbxra = 'pber/FRG_GBXRA',
  PyrneGbxra = 'pber/PYRNE_GBXRA',
  ErserfuGbxra = 'pber/ERSERFU_GBXRA',
  HcqngrRznvyNqqerff = 'pber/HCQNGR_RZNVY_NQQERFF',
  HcqngrAnzr = 'pber/HCQNGR_ANZR',
  HcqngrFryrpgrqPbagenpg = 'pber/HCQNGR_FRYRPGRQ_PBAGENPG',
}

rkcbeg pbafg PberNpgvbaf = {
  ybtBhg: () => perngrNpgvba(
    PberNpgvbaGlcrf.YbtBhg,
  ),
  frgYbttrqVa: (vfYbttrqVa: obbyrna) => perngrNpgvba(
    PberNpgvbaGlcrf.FrgYbttrqVa,
    { vfYbttrqVa },
  ),
  frgGbxra: (gbxra: VGbxraFgngr) => perngrNpgvba(
    PberNpgvbaGlcrf.FrgGbxra,
    { gbxra },
  ),
  pyrneGbxra: () => perngrNpgvba(
    PberNpgvbaGlcrf.PyrneGbxra,
  ),
  erserfuGbxra: (gbxra: VGbxraFgngr) => perngrNpgvba(
    PberNpgvbaGlcrf.ErserfuGbxra,
    { gbxra },
  ),
  hcqngrRznvyNqqerff: (rznvy: fgevat) => perngrNpgvba(
    PberNpgvbaGlcrf.HcqngrRznvyNqqerff,
    { rznvy },
  ),
  hcqngrAnzr: (svefgAnzr: fgevat, ynfgAnzr: fgevat) => perngrNpgvba(
    PberNpgvbaGlcrf.HcqngrAnzr,
    { svefgAnzr, ynfgAnzr },
  ),
  hcqngrFryrpgrqPbagenpg: (pbagenpgAhzore: ahzore) => perngrNpgvba(
    PberNpgvbaGlcrf.HcqngrFryrpgrqPbagenpg,
    { pbagenpgAhzore },
  ),
};

rkcbeg glcr PberNpgvba = NpgvbaGlcr<glcrbs PberNpgvbaf>;








rkcbeg qrsnhyg [
  'ebhgre',
  'pber.gbxra',
  'pber.anivtngvba',
];







rkcbeg * sebz './pbzcbaragf';
rkcbeg * sebz './zbqryf';
rkcbeg * sebz './freivprf';
rkcbeg * sebz './cynltebhaq';
rkcbeg * sebz './hgvyf';
rkcbeg * sebz './npgvbaf';
rkcbeg * sebz './erqhpref';
rkcbeg * sebz './fgngr';
vzcbeg * nf fryrpgbef sebz './fryrpgbef';

rkcbeg { fryrpgbef };
rkcbeg { PberNpgvba } sebz './npgvbaf';






vzcbeg { VPberFgngr } sebz '~/erqhpref';

rkcbeg vagresnpr VFgngr {
  pber: VPberFgngr;
}









vzcbeg { svygre, znc, qrynl } sebz 'ekwf/bcrengbef';
vzcbeg { YBPNGVBA_PUNATR, YbpngvbaPunatrNpgvba, chfu } sebz 'pbaarpgrq-ernpg-ebhgre';

vzcbeg { Rssrpg } sebz '~/zbqryf';
vzcbeg { CntrHeyf } sebz '@tybony/v18a';

rkcbeg pbafg thneqEbhgr = <Fgngr>(
  ebhgr: (heyf: CntrHeyf) => fgevat,
  cerqvpngr: (fgngr: Fgngr) => obbyrna,
  snyyonpx: (heyf: CntrHeyf) => fgevat,
): Rssrpg<YbpngvbaPunatrNpgvba, nal, Fgngr> => (
  (npgvba$, fgngr$, { ybpnyr }) => npgvba$
    .bsGlcr(YBPNGVBA_PUNATR)
    .cvcr(
      znc((npgvba) => npgvba.cnlybnq.ybpngvba.cnguanzr),
      svygre((cntr) => cntr === ebhgr(ybpnyr.heyf)),
      svygre(() => cerqvpngr(fgngr$.inyhr)),
      qrynl(0),
      znc(() => chfu(snyyonpx(ybpnyr.heyf))),
    )
);








vzcbeg { trg, frg } sebz 'ybqnfu';
vzcbeg { sebz, Bofreinoyr } sebz 'ekwf';
vzcbeg { znc, fjvgpuZnc, svefg, fxvcHagvy, svygre } sebz 'ekwf/bcrengbef';

vzcbeg {
  trgErfcbafrUrnqref,
  vfFhpprffErfcbafr,
  unfGbxraRkcverq,
  cnefrObql,
  trgReebeObql,
  zncGbFreivprHey,
  trgFrpergGbxra,
  pbagragGlcrf,
} sebz './urycref';
vzcbeg { VFgngr } sebz '~/fgngr';

rkcbeg glcr Urnqref = { [xrl: fgevat]: fgevat };
rkcbeg glcr Dhrel = { [xrl: fgevat]: fgevat };

rkcbeg vagresnpr VFhpprffErfcbafr<ErfcbafrObql = haqrsvarq, ErfcbafrUrnqref = Urnqref> {
  fgnghf: ahzore;
  obql: ErfcbafrObql;
  urnqref: ErfcbafrUrnqref;
}

rkcbeg vagresnpr VReebeErfcbafr<Reebe = fgevat> {
  fgnghf: ahzore;
  reebe?: Reebe;
  urnqref: Urnqref;
}

rkcbeg glcr Erfcbafr<G> = VReebeErfcbafr | VFhpprffErfcbafr<G>;

rkcbeg vagresnpr VSrgpuBcgvbaf<ErdhrfgObql = nal> {
  zrgubq?: 'TRG' | 'CBFG' | 'QRYRGR' | 'CNGPU' | 'CHG' | 'URNQ' | 'BCGVBAF' | 'PBAARPG';
  urnqref?: Urnqref;
  obql?: ErdhrfgObql;
  dhrel?: Dhrel;
}

rkcbeg rahz ErdhrfgGlcr {
  FrysFreivpr,
  Nhgu,
  Cebqhpgf,
  Pzf,
}

rkcbeg vagresnpr VErdhrfg<ErdhrfgObql = nal> {
  glcr: ErdhrfgGlcr;
  hev: fgevat;
  bcgvbaf: VSrgpuBcgvbaf<ErdhrfgObql>;
  erdhverfNhgu?: obbyrna;
  erdhverfFrperg?: obbyrna;
}

rkcbeg pbafg srgpu = nflap <G>(hey: fgevat, bcgvbaf?: VSrgpuBcgvbaf): Cebzvfr<Erfcbafr<G>> => {
  pbafg svanyBcgvbaf = {
    ...bcgvbaf,
    urnqref: {
      'Pbagrag-Glcr': pbagragGlcrf.wfba,
      ...trg(bcgvbaf, ['urnqref']),
    },
  };

  yrg erfcbafr: nal;
  gel {
    erfcbafr = njnvg jvaqbj.srgpu(hey, svanyBcgvbaf);

    vs (!vfFhpprffErfcbafr(erfcbafr)) {
      guebj gehr;
    }

    erghea {
      fgnghf: erfcbafr.fgnghf,
      obql: njnvg cnefrObql(erfcbafr),
      urnqref: trgErfcbafrUrnqref(erfcbafr),
    };
  } pngpu (ree) {
    pbafg reebeObql = (erfcbafr && erfcbafr.wfba) ? erfcbafr : ree;

    guebj {
      fgnghf: reebeObql.fgnghf,
      reebe: njnvg trgReebeObql(reebeObql),
      urnqref: reebeObql.urnqref,
    };
  }
};

pbafg frgNhguUrnqre = (gbxra: fgevat, glcr: 'Onfvp' | 'Ornere', bcgvbaf: VSrgpuBcgvbaf) => (
  frg(bcgvbaf, 'urnqref.Nhgubevmngvba', `${glcr} ${gbxra}`)
);

rkcbeg pbafg srgpu$ = <ErfcbafrObql = nal>(erdhrfg: VErdhrfg, fgngr$?: Bofreinoyr<nal>) => {
  pbafg pnyy = (bcgvbaf: VSrgpuBcgvbaf) => {
    pbafg hey = zncGbFreivprHey(erdhrfg.hev, erdhrfg.glcr, bcgvbaf.dhrel);
    erghea sebz(srgpu<ErfcbafrObql>(hey, bcgvbaf));
  };

  vs (erdhrfg.erdhverfNhgu) {
    vs (!fgngr$) {
      guebj arj Reebe('Lbh unir gb cnff va fgngr$ gb znxr na nhguragvpngrq pnyy');
    }

    erghea fgngr$.cvcr(
      fxvcHagvy(
        fgngr$.cvcr(
          znc((fgngr: VFgngr) => fgngr.pber.gbxra),
          svygre((gbxra) => !unfGbxraRkcverq(gbxra)),
        ),
      ),
      znc((fgngr: VFgngr) => fgngr.pber.gbxra.npprffGbxra),
      svefg(),
      fjvgpuZnc((gbxra: fgevat) => pnyy(frgNhguUrnqre(gbxra, 'Ornere', erdhrfg.bcgvbaf))),
    );
  }

  vs (erdhrfg.erdhverfFrperg) {
    erghea pnyy(frgNhguUrnqre(trgFrpergGbxra(), 'Onfvp', erdhrfg.bcgvbaf));
  }

  erghea pnyy(erdhrfg.bcgvbaf);
};








vzcbeg { sebzCnvef } sebz 'ybqnfu';
vzcbeg { pbzcbfr } sebz 'erqhk';
vzcbeg qbjaybnq sebz 'qbjaybnqwf';
vzcbeg df sebz 'df';

vzcbeg { Dhrel, ErdhrfgGlcr, Erfcbafr } sebz './srgpu';
vzcbeg { VGbxraFgngr } sebz '~/erqhpref';
vzcbeg { trg nf trgPbbxvr } sebz 'wf-pbbxvr';
vzcbeg { freiref } sebz '~/freivprf';

// Rkgenpgf urnqref bhg bs n Erfcbafr bowrpg
rkcbeg pbafg trgErfcbafrUrnqref = pbzcbfr(
  sebzCnvef,
  Neenl.sebz,
  (erfcbafr: Erfcbafr<nal>) => erfcbafr.urnqref,
);

// Qrgrezvarf vs n UGGC pnyy jnf fhpprffshy be abg
rkcbeg pbafg vfFhpprffErfcbafr = (erfcbafr: Erfcbafr<nal>) => {
  erghea erfcbafr.fgnghf >= 200 && erfcbafr.fgnghf < 400;
};

// Urycre shapgvbaf gb cnefr n UGGC erfcbafr obql be reebe obql
rkcbeg pbafg pbagragGlcrf = {
  cqs: 'nccyvpngvba/cqs',
  wfba: 'nccyvpngvba/wfba',
};

pbafg vfErfcbafrGlcr = (glcr: fgevat) => (erfcbafr: nal) => {
  pbafg pbagragGlcr = erfcbafr.urnqref.trg('Pbagrag-Glcr');
  erghea pbagragGlcr === glcr;
};

pbafg vfCQS = vfErfcbafrGlcr(pbagragGlcrf.cqs);

rkcbeg pbafg cnefrObql = nflap (erfcbafr: nal) => {
  yrg cnefrq;
  gel {
    vs (vfCQS(erfcbafr)) {
      cnefrq = njnvg erfcbafr.oybo();
    } ryfr {
      cnefrq = njnvg erfcbafr.wfba();
    }
  } pngpu (reebe) {
    gel {
      cnefrq = njnvg erfcbafr.grkg();
    } pngpu (reebe) {
      cnefrq = ahyy;
    }
  }

  erghea cnefrq;
};

rkcbeg pbafg trgReebeObql = nflap (ree: nal) => {
  vs (!ree) {
    erghea '';
  }

  vs (ree vafgnaprbs Reebe) {
    erghea ree.zrffntr;
  }

  erghea cnefrObql(ree);
};

// Va-oebjfre svyr qbjaybnqre urycre
rkcbeg pbafg qbjaybnqSvyr = nflap (oybo: Oybo, svyrAnzr: fgevat, zvzrGlcr: fgevat) => {
  qbjaybnq(oybo, svyrAnzr, zvzrGlcr);
};

// Freivpr HEY znccre
pbafg trgFreire = () => {
  pbafg gnetrgFreireGlcr = trgPbbxvr('freireRai') || QRSNHYG_GNETRG_FREIRE;
  erghea freiref[gnetrgFreireGlcr];
};

rkcbeg pbafg trgPzfSvyrHey = (hey: fgevat) => {
  erghea `${trgFreire().pzfHey}${hey}`;
};

rkcbeg pbafg nccraqDhrelCnenzf = (hey: fgevat, dhrel: Dhrel) => {
  pbafg dhrelFgevat = df.fgevatvsl(dhrel);
  erghea `${hey}?${dhrelFgevat}`;
};

pbafg trgFreivprAnzr = (glcr: ErdhrfgGlcr, qrirybczrag: obbyrna): fgevat => {
  vs (qrirybczrag) {
    pbafg ybbxhc = {
      [ErdhrfgGlcr.FrysFreivpr]: 'frysfreivpr',
      [ErdhrfgGlcr.Nhgu]: 'fcnhgu',
      [ErdhrfgGlcr.Cebqhpgf]: 'cebqhpgf',
    } nf nal;

    erghea ybbxhc[glcr];
  } ryfr {
    pbafg ybbxhc = {
      [ErdhrfgGlcr.FrysFreivpr]: 'nppbhagf',
      [ErdhrfgGlcr.Nhgu]: 'nhgu',
      [ErdhrfgGlcr.Cebqhpgf]: 'cebqhpgf',
    } nf nal;

    erghea ybbxhc[glcr];
  }
};

pbafg trgErtvbaPbagrkg = () => {
  vs (ERTVBA === VERYNAQ) {
    erghea 'verynaq';
  }

  vs (ERTVBA === GRKNF) {
    erghea 'grknf';
  }

  guebj arj Reebe('Ertvba abg erpbtavfrq');
};

rkcbeg pbafg zncGbFreivprHey = (hev: fgevat, glcr: ErdhrfgGlcr, dhrel?: Dhrel) => {
  pbafg { onfrHey, freirePbagrkg, pzfHey } = trgFreire();
  yrg raqcbvag = dhrel ? nccraqDhrelCnenzf(hev, dhrel) : hev;

  vs (glcr === ErdhrfgGlcr.Pzf) {
    erghea `${pzfHey}${raqcbvag}`;
  }

  vs (VF_OYHRZVK_OHVYQ) {
    raqcbvag = `${trgFreivprAnzr(glcr, snyfr)}${raqcbvag}`;
  } ryfr {
    raqcbvag = `${trgFreivprAnzr(glcr, gehr)}-${freirePbagrkg}-${trgErtvbaPbagrkg()}/i1${raqcbvag}`;
  }

  erghea `${onfrHey}/${raqcbvag}`;
};

// Ergheaf funerq frperg sbe gur pheeragyl fryrpgrq freire
rkcbeg pbafg trgFrpergGbxra = () => {
  pbafg { gbxra } = trgFreire();
  erghea gbxra;
};

// Erserfu gbxra urycref
pbafg ERSERFU_GBXRA_GVZR = 30; // Erserfu 30 frpbaqf cevbe gb rkcvel

rkcbeg pbafg trgGbxraRkcvelGvzr = (gbxra: VGbxraFgngr) => {
  erghea gbxra.gvzr + gbxra.rkcverfVa - ERSERFU_GBXRA_GVZR;
};

rkcbeg pbafg unfGbxraRkcverq = (gbxra: VGbxraFgngr) => {
  pbafg abj = Zngu.sybbe(arj Qngr().trgGvzr() / 1000);
  erghea trgGbxraRkcvelGvzr(gbxra) < abj;
};







vzcbeg { hfrPbagrkg, perngrPbagrkg } sebz 'ernpg';

vzcbeg { VYbpnyr } sebz '@tybony/v18a';

rkcbeg pbafg YbpnyrPbagrkg = perngrPbagrkg<VYbpnyr>(ahyy);
rkcbeg pbafg trgYbpnyr = () => hfrPbagrkg(YbpnyrPbagrkg);











FREVNYVFVNGVBA.GF

pbafg QNGR_GNT_FGNEG = '[Qngr]';
pbafg QNGR_GNT_RAQ = '[/Qngr]';

pbafg vfQngr = (inyhr: nal) => inyhr vafgnaprbs Qngr;
pbafg fgevatvslQngr = (inyhr: Qngr) => `${QNGR_GNT_FGNEG}${inyhr.trgGvzr()}${QNGR_GNT_RAQ}`;

rkcbeg shapgvba qngrErcynpre(_: fgevat, inyhr: nal) {
  vs (glcrbs (inyhr) === 'bowrpg') {
    vs (Neenl.vfNeenl(inyhr)) {
      erghea inyhr.znc((k) => vfQngr(k) ? fgevatvslQngr(k) : k);
    }

    yrg unfPunatrq = snyfr;
    pbafg znccrq: nal = {};

    sbe (pbafg xrl va inyhr) {
      vs (vfQngr(inyhr[xrl])) {
        znccrq[xrl] = fgevatvslQngr(inyhr[xrl]);
        unfPunatrq = gehr;
      }
    }

    erghea unfPunatrq ? { ...inyhr, ...znccrq } : inyhr;
  }

  erghea inyhr;
}

rkcbeg shapgvba qngrErivire(_: fgevat, inyhr: nal) {
  vs (glcrbs (inyhr) === 'fgevat' && inyhr.fgnegfJvgu(QNGR_GNT_FGNEG) && inyhr.raqfJvgu(QNGR_GNT_RAQ)) {
    pbafg gvzrfgnzc = Ahzore(inyhr.fhofgevat(QNGR_GNT_FGNEG.yratgu, inyhr.yratgu - QNGR_GNT_RAQ.yratgu));
    erghea arj Qngr(gvzrfgnzc);
  }

  erghea inyhr;
}







vzcbeg { perngrFgber nf perngrErqhkFgber, pbzovarErqhpref, nccylZvqqyrjner, Erqhpre, Fgber } sebz 'erqhk';
vzcbeg { pbzovarRcvpf, perngrRcvpZvqqyrjner, Rcvp, FgngrBofreinoyr } sebz 'erqhk-bofreinoyr';
vzcbeg { pbzcbfrJvguQriGbbyf nf pbzcbfrQrirybczrag } sebz 'erqhk-qrigbbyf-rkgrafvba';
vzcbeg { pbzcbfrJvguQriGbbyf nf pbzcbfrCebqhpgvba } sebz 'erqhk-qrigbbyf-rkgrafvba/qrirybczragBayl';
vzcbeg { pbaarpgEbhgre, ebhgreZvqqyrjner } sebz 'pbaarpgrq-ernpg-ebhgre';
vzcbeg { Fhowrpg } sebz 'ekwf';
vzcbeg { Uvfgbel } sebz 'uvfgbel';
vzcbeg { bzvg } sebz 'ybqnfu';
vzcbeg { frg, trg } sebz 'wf-pbbxvr';

vzcbeg { VYbpnyr } sebz '@tybony/v18a';
vzcbeg { zncFgngrGbSrngherSyntf } sebz '@tybony/srngher-syntf';
vzcbeg pberErqhpre sebz '~/erqhpref';
vzcbeg pberRssrpgf sebz '~/rssrpgf';
vzcbeg pberRkpyhqrf sebz '~/rkpyhqrf';
vzcbeg { qngrErcynpre, qngrErivire } sebz './frevnyvfngvba';

pbafg GBXRA_RKCVEL_QNLF = 7;

rkcbeg glcr ErqhprefZnc<G> = { [X va xrlbs G]: Erqhpre };

rkcbeg pbafg perngrFgber = <G>(uvfgbel: Uvfgbel,
                               erqhpre: ErqhprefZnc<G>,
                               rssrpgf?: Rcvp,
                               ybpnyr?: VYbpnyr,
                               vavgvnyFgngr?: G,
                               vfQrirybczrag = snyfr) => {
  pbafg srngherSyntFhowrpg$ = arj Fhowrpg();

  pbafg srngherSyntf$ = arj FgngrBofreinoyr(srngherSyntFhowrpg$, {});
  pbafg rssrpgfZvqqyrjner = perngrRcvpZvqqyrjner({
    qrcraqrapvrf: { ybpnyr, srngherSyntf$ },
  });

  pbafg pbzcbfr = vfQrirybczrag ? pbzcbfrQrirybczrag : pbzcbfrCebqhpgvba;

  pbafg fgber = perngrErqhkFgber(
    pbzovarErqhpref({
      ebhgre: pbaarpgEbhgre(uvfgbel),
      pber: pberErqhpre,
      ...erqhpre,
    }),
    vavgvnyFgngr,
    pbzcbfr(
      nccylZvqqyrjner(
        ebhgreZvqqyrjner(uvfgbel),
        rssrpgfZvqqyrjner,
      ),
    ),
  );

  vs (rssrpgf) {
    rssrpgfZvqqyrjner.eha(pbzovarRcvpf(pberRssrpgf, rssrpgf));
  }

  fgber.fhofpevor(() => {
    srngherSyntFhowrpg$.arkg(zncFgngrGbSrngherSyntf(fgber.trgFgngr()));
  });

  erghea fgber;
};

rkcbeg pbafg trarengrXrl = (xrl: fgevat, irefvba: fgevat) => `vo.tybony.${xrl}.${irefvba}`;

rkcbeg pbafg frevnyvfrFgngr = (anzr: fgevat, irefvba: fgevat, rkpyhqrf: fgevat[], fgber: Fgber) => {
  pbafg fgngr = fgber.trgFgngr();
  pbafg xrl = trarengrXrl(anzr, irefvba);
  pbafg pbbxvr = [xrl, 'gbxra'].wbva('_');

  // Svygre rkpyhqrq fgngr
  pbafg svygrerqFgngr = bzvg(fgngr, [...rkpyhqrf, ...pberRkpyhqrf]);

  // Nggrzcg gb frevnyvfr fgngr gb ybpny fgbentr
  gel {
    jvaqbj.ybpnyFgbentr.frgVgrz(xrl, WFBA.fgevatvsl(svygrerqFgngr, qngrErcynpre));
  } pngpu (reebe) {
    pbafbyr.jnea('Pbhyq abg frevnyvfr nccyvpngvba fgngr gb ybpny fgbentr.', reebe);
  }

  // Nggrzcg gb frevnyvfr ybtva gbxra nf n pbbxvr
  gel {
    pbafg { gbxra: gbxraFgngr } = fgngr.pber;
    frg(pbbxvr, WFBA.fgevatvsl(gbxraFgngr, qngrErcynpre), { rkcverf: GBXRA_RKCVEL_QNLF });
  } pngpu (reebe) {
    pbafbyr.jnea('Pbhyq abg frevnyvfr frffvba gbxra gb pbbxvrf.', reebe);
  }
};

rkcbeg pbafg qrfrevnyvfrFgngr = (anzr: fgevat, irefvba: fgevat) => {
  pbafg xrl = trarengrXrl(anzr, irefvba);
  pbafg pbbxvr = [xrl, 'gbxra'].wbva('_');

  // Nggrzcg gb frevnyvfr fgngr sebz ybpny fgbentr
  pbafg fgngr = jvaqbj.ybpnyFgbentr.trgVgrz(xrl)
    ? WFBA.cnefr(jvaqbj.ybpnyFgbentr.trgVgrz(xrl), qngrErivire)
    : {};

  // Nggrzcg gb qrfrevnyvfr ybtva gbxra sebz pbbxvrf
  pbafg gbxra = trg(pbbxvr)
    ? WFBA.cnefr(trg(pbbxvr), qngrErivire)
    : haqrsvarq;

  vs (gbxra) {
    vs (!fgngr.pber) {
      fgngr.pber = { gbxra };
    } ryfr {
      fgngr.pber.gbxra = gbxra;
    }
  }

  erghea fgngr;
};






Perngr erqhpre:


vzcbeg { NalNpgvba } sebz 'erqhk';

vzcbeg { NpgvbaOlGlcr, VNpgvbaCnlybnq } sebz '~/zbqryf/npgvbaf';

rkcbeg pbafg perngrErqhpre = (
  <Fgngr = nal, Glcrf rkgraqf fgevat = nal, Npgvbaf rkgraqf NalNpgvba = nal>(
    vavgvny: Fgngr,
    erqhpref: Cnegvny<{
      [Glcr va Glcrf]: (fgngr: Fgngr, cnlybnq: NpgvbaOlGlcr<Npgvbaf, Glcr>['cnlybnq']) => Fgngr
    }>,
  ) => (
    (fgngr: Fgngr = vavgvny, npgvba: VNpgvbaCnlybnq<Glcrf, nal>) => (
      erqhpref[npgvba.glcr] ? erqhpref[npgvba.glcr](fgngr, npgvba.cnlybnq) : fgngr
    )
  )
);









Erqhpref


vzcbeg { pbzovarErqhpref } sebz 'erqhk';

vzcbeg { gbxraErqhpre, VGbxraFgngr } sebz './gbxra';
vzcbeg { hfreErqhpre, VHfreFgngr } sebz './hfre';
vzcbeg { anivtngvbaErqhpre, VAnivtngvbaFgngr } sebz './anivtngvba';

rkcbeg vagresnpr VPberFgngr {
  gbxra: VGbxraFgngr;
  hfre: VHfreFgngr;
  anivtngvba: VAnivtngvbaFgngr;
}

rkcbeg { VGbxraFgngr };
rkcbeg { VHfreFgngr };
rkcbeg { VAnivtngvbaFgngr };

rkcbeg qrsnhyg pbzovarErqhpref({
  gbxra: gbxraErqhpre,
  hfre: hfreErqhpre,
  anivtngvba: anivtngvbaErqhpre,
});



Rknzcyr:

vzcbeg { perngrErqhpre } sebz '../hgvyf';
vzcbeg { PberNpgvba, PberNpgvbaGlcrf } sebz '../npgvbaf';

rkcbeg glcr VHfreFgngr = {
  svefgAnzr: fgevat;
  ynfgAnzr: fgevat;
  rznvy: fgevat;
  fryrpgrqPbagenpgAhzore: ahzore | ahyy;
};

pbafg VAVVGNY_FGNGR: VHfreFgngr = {
  svefgAnzr: '',
  ynfgAnzr: '',
  rznvy: '',
  fryrpgrqPbagenpgAhzore: ahyy,
};

rkcbeg pbafg hfreErqhpre = perngrErqhpre<VHfreFgngr, PberNpgvbaGlcrf, PberNpgvba>(VAVVGNY_FGNGR, {
  [PberNpgvbaGlcrf.HcqngrRznvyNqqerff]: (fgngr, { rznvy }) => ({ ...fgngr, rznvy }),
  [PberNpgvbaGlcrf.HcqngrAnzr]: (fgngr, { svefgAnzr, ynfgAnzr }) => ({ ...fgngr, svefgAnzr, ynfgAnzr }),
  [PberNpgvbaGlcrf.HcqngrFryrpgrqPbagenpg]: (fgngr, { pbagenpgAhzore }) => (
    { ...fgngr, fryrpgrqPbagenpgAhzore: pbagenpgAhzore }
  ),
  [PberNpgvbaGlcrf.YbtBhg]: () => VAVVGNY_FGNGR,
});







Zbqryf/npgvbaf




vzcbeg { Npgvba, NpgvbaPerngbefZncBowrpg } sebz 'erqhk';
vzcbeg { Rcvp, FgngrBofreinoyr } sebz 'erqhk-bofreinoyr';
vzcbeg { srngherSyntf } sebz '@tybony/srngher-syntf';

vzcbeg { VYbpnyr } sebz '@tybony/v18a';

rkcbeg vagresnpr VNpgvba<G rkgraqf fgevat> rkgraqf Npgvba {
  glcr: G;
}

rkcbeg vagresnpr VNpgvbaCnlybnq<G rkgraqf fgevat, C> rkgraqf VNpgvba<G> {
  cnlybnq: C;
}

rkcbeg shapgvba perngrNpgvba<G rkgraqf fgevat>(glcr: G): VNpgvba<G>;
rkcbeg shapgvba perngrNpgvba<G rkgraqf fgevat, C>(glcr: G, cnlybnq: C): VNpgvbaCnlybnq<G, C>;
rkcbeg shapgvba perngrNpgvba(glcr: fgevat, cnlybnq?: nal) {
  erghea cnlybnq ? { glcr, cnlybnq } : { glcr };
}

rkcbeg glcr NpgvbaGlcr<G rkgraqf NpgvbaPerngbefZncBowrpg> = ErgheaGlcr<G[xrlbs G]>;

glcr Aneebj<G, H> = G rkgraqf H ? G : arire;
rkcbeg glcr NpgvbaOlGlcr<N, G rkgraqf fgevat> = Aneebj<N, { glcr: G }>;
rkcbeg glcr Rssrpg<N = nal, G rkgraqf fgevat = nal, F = nal> = Rcvp<NpgvbaOlGlcr<N, G>, nal, F, {
  ybpnyr: VYbpnyr,
  srngherSyntf$: FgngrBofreinoyr<srngherSyntf>,
}>;







Rssrpgf:

vzcbeg { pbzovarRcvpf } sebz 'erqhk-bofreinoyr';

vzcbeg anivtngvbaRssrpgf sebz './anivtngvba';

rkcbeg qrsnhyg pbzovarRcvpf(anivtngvbaRssrpgf);





vzcbeg { pbzovarRcvpf } sebz 'erqhk-bofreinoyr';
vzcbeg { YBPNGVBA_PUNATR, chfu, YbpngvbaPunatrNpgvba } sebz 'pbaarpgrq-ernpg-ebhgre';
vzcbeg { svygre, znc } sebz 'ekwf/bcrengbef';

vzcbeg { Rssrpg } sebz '~/zbqryf';

rkcbeg pbafg fgevcGenvyvatFynfuRssrpg: Rssrpg<YbpngvbaPunatrNpgvba> = (npgvba$, _, { ybpnyr }) => npgvba$
  .bsGlcr(YBPNGVBA_PUNATR)
  .cvcr(
    znc((npgvba) => npgvba.cnlybnq.ybpngvba.cnguanzr),
    svygre((cngu) => cngu !== ybpnyr.heyf.ebbg),
    svygre((cngu) => cngu.raqfJvgu('/')),
    znc((cngu) => chfu(cngu.fhofgevat(0, cngu.yratgu - 1))),
  );

rkcbeg qrsnhyg pbzovarRcvpf(
  fgevcGenvyvatFynfuRssrpg,
);







Ebhgrf


vzcbeg Ernpg sebz 'ernpg';

vzcbeg { Ebhgr } sebz '@tybony/pber';
vzcbeg { PzfCntr } sebz './cntrf';
vzcbeg { cerEraqreFgngvpCntr } sebz '~/hgvyf';

/* gfyvag:qvfnoyr:wfk-xrl */
rkcbeg qrsnhyg () => [
  <Ebhgr pbzcbarag={PzfCntr} cerEraqreSa={cerEraqreFgngvpCntr}/>,
];







Fryrpgbef


vzcbeg { perngrFryrpgbe } sebz 'erfryrpg';

vzcbeg { VFgngr } sebz '~/fgngr';

rkcbeg pbafg trgCntr = perngrFryrpgbe(
  (fgngr: VFgngr) => fgngr.fgngvpCntrf,
  (fgngr) => fgngr.cntr,
);

rkcbeg pbafg unfCntr = perngrFryrpgbe(
  trgCntr,
  (cntr) => cntr.obql != ahyy,
);







Pbaarpg



vzcbeg { pbaarpg } sebz 'ernpg-erqhk';

vzcbeg { PzfCntr nf PzfCntrIvrj } sebz './PzfCntr';
vzcbeg { fryrpgbef } sebz './fryrpgbef';
vzcbeg { npgvbaf } sebz './npgvbaf';

rkcbeg pbafg PzfCntr = pbaarpg(fryrpgbef, npgvbaf)(PzfCntrIvrj);





Raqcbvag


vzcbeg { VErdhrfg, ErdhrfgGlcr } sebz '@tybony/pber';

rkcbeg vagresnpr VCntr {
  gvgyr: fgevat;
  qrfpevcgvba: fgevat;
  xrljbeqf: fgevat[];
  obql: fgevat;
}

rkcbeg pbafg trgCntr = (hey: fgevat): VErdhrfg => ({
  glcr: ErdhrfgGlcr.Pzf,
  hev: `/ncv/vgrzf/pbagragf`,
  bcgvbaf: {
    zrgubq: 'TRG',
    dhrel: {
      pbagragVq: hey,
    },
  },
});







Nabgure rssrpg




vzcbeg { pbzovarRcvpf } sebz 'erqhk-bofreinoyr';
vzcbeg { bs, enpr, gvzre } sebz 'ekwf';
vzcbeg { pngpuReebe, svygre, znc, zncGb, fjvgpuZnc } sebz 'ekwf/bcrengbef';
vzcbeg { YBPNGVBA_PUNATR, YbpngvbaPunatrNpgvba } sebz 'pbaarpgrq-ernpg-ebhgre';

vzcbeg { Rssrpg, srgpu$, VFhpprffErfcbafr, fryrpgbef nf pberFryrpgbef } sebz '@tybony/pber';
vzcbeg { VFgngr } sebz '~/fgngr';
vzcbeg { CntrNpgvba, CntrNpgvbaf, CntrNpgvbaGlcrf } sebz '~/npgvbaf';
vzcbeg { trgCntr, VCntr } sebz '~/raqcbvagf';
vzcbeg { unfCntr nf unfCntrFryrpgbe } sebz '~/fryrpgbef';
vzcbeg { FREIRE_GVZRBHG } sebz '~/hgvyf';

rkcbeg pbafg pyrneCntrRssrpg: Rssrpg<YbpngvbaPunatrNpgvba, nal, VFgngr> = (npgvba$, fgngr$) => npgvba$
  .bsGlcr(YBPNGVBA_PUNATR)
  .cvcr(
    svygre(() => {
      pbafg unfCntr = unfCntrFryrpgbe(fgngr$.inyhr);
      pbafg cerivbhf = pberFryrpgbef.trgCerivbhfEbhgr(fgngr$.inyhr);
      pbafg pheerag = pberFryrpgbef.trgPheeragEbhgr(fgngr$.inyhr);
      erghea unfCntr && cerivbhf && cerivbhf !== pheerag;
    }),
    zncGb(CntrNpgvbaf.pyrneCntr()),
  );

rkcbeg pbafg trgCntrRssrpg: Rssrpg<CntrNpgvba, CntrNpgvbaGlcrf.TrgCntr, VFgngr> = (npgvba$) => npgvba$
  .bsGlcr(CntrNpgvbaGlcrf.TrgCntr)
  .cvcr(
    fjvgpuZnc(({ cnlybnq }) => (
      enpr(
        srgpu$(trgCntr(cnlybnq.hey))
          .cvcr(
            znc((erfcbafr: VFhpprffErfcbafr<VCntr>) => CntrNpgvbaf.frgCntr(erfcbafr.obql)),
            pngpuReebe(() => bs(CntrNpgvbaf.cntrAbgSbhaq())),
          ),
        gvzre(FREIRE_GVZRBHG)
          .cvcr(
            zncGb(CntrNpgvbaf.cntrFreireReebe()),
          ),
      )
    )),
  );

rkcbeg qrsnhyg pbzovarRcvpf(
  pyrneCntrRssrpg,
  trgCntrRssrpg,
);







Rknzcyr nzc



vzcbeg Ernpg sebz 'ernpg';

vzcbeg { Tevq, Ebj, Pbyhza, Znexqbja } sebz '@tybony/pbzcbaragf';
vzcbeg { Zrgn } sebz '@tybony/pber';
vzcbeg { cnqqvat } sebz './FgngvpCntr.fpff';

rkcbeg vagresnpr VFgngvpCntrCebcf {
  gvgyr: fgevat;
  xrljbeqf?: fgevat[];
  qrfpevcgvba?: fgevat;
  obql: fgevat;
}

rkcbeg pbafg FgngvpCntr: Ernpg.SP<VFgngvpCntrCebcf> = ({ gvgyr, obql, xrljbeqf = [], qrfpevcgvba }) => (<>
    <Zrgn gvgyr={gvgyr} xrljbeqf={xrljbeqf} qrfpevcgvba={qrfpevcgvba}/>
    <qvi pynffAnzr={cnqqvat}>
      <Tevq>
        <Ebj>
          <Pbyhza>
            <Znexqbja znexqbja={obql}/>
          </Pbyhza>
        </Ebj>
      </Tevq>
    </qvi>
  </>
);










